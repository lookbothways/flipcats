<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Card Set Creator</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 40px auto; padding: 20px; line-height: 1.6; background: #f4f4f9; }
        .header-nav { margin-bottom: 20px; }
        .header-nav a { text-decoration: none; color: #4255ff; font-weight: bold; font-size: 0.9rem; }
        .section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 100%; box-sizing: border-box; margin-bottom: 10px; }
        .card-row { display: flex; gap: 10px; margin-bottom: 10px; align-items: center; }
        .card-row input { margin-bottom: 0; }
        button { cursor: pointer; padding: 10px 15px; border: none; border-radius: 4px; font-weight: bold; }
        .btn-add { background: #4255ff; color: white; width: 100%; margin-top: 10px; }
        .btn-save { background: #23b26d; color: white; width: 100%; font-size: 1.1rem; margin-top: 20px; }
        .btn-del { background: #ff4d4d; color: white; padding: 8px 12px; }
        h2 { margin-top: 0; color: #303545; }
        .hint { font-size: 0.8rem; color: #666; margin-bottom: 15px; }
    </style>
</head>
<body>

    <div class="header-nav">
        <a href="index.html">← Back to Flashcards</a>
    </div>

    <div class="section">
        <h2>1. File Info</h2>
        <label>Set Name (used for filename)</label>
        <input type="text" id="setName" placeholder="e.g. nasal_mutations">
        <p class="hint">This will save as: <b>cards_<span id="filename-preview">...</span>.json</b></p>

        <div style="display: flex; gap: 20px;">
            <div style="flex: 1;">
                <label>Front Label</label>
                <input type="text" id="frontLabel" value="Radical">
            </div>
            <div style="flex: 1;">
                <label>Back Label</label>
                <input type="text" id="backLabel" value="Mutation">
            </div>
        </div>
    </div>

    <div class="section">
        <h2>2. Cards</h2>
        <div id="card-list">
            <div class="card-row">
                <input type="text" class="f-input" placeholder="Front (f)">
                <input type="text" class="b-input" placeholder="Back (b)">
                <button class="btn-del" onclick="this.parentElement.remove()">✕</button>
            </div>
        </div>
        <button class="btn-add" onclick="addCardRow()">+ Add Card</button>
    </div>

    <button class="btn-save" onclick="downloadJson()">Save as JSON File</button>

    <script>
        document.getElementById('setName').addEventListener('input', function(e) {
            document.getElementById('filename-preview').innerText = e.target.value || '...';
        });

        function addCardRow() {
            const container = document.getElementById('card-list');
            const div = document.createElement('div');
            div.className = 'card-row';
            div.innerHTML = `<input type="text" class="f-input" placeholder="Front (f)"><input type="text" class="b-input" placeholder="Back (b)"><button class="btn-del" onclick="this.parentElement.remove()">✕</button>`;
            container.appendChild(div);
        }

        function downloadJson() {
            const setName = document.getElementById('setName').value || 'new_cards';
            const data = {
                frontLabel: document.getElementById('frontLabel').value,
                backLabel: document.getElementById('backLabel').value,
                cards: Array.from(document.querySelectorAll('.card-row')).map(row => ({
                    f: row.querySelector('.f-input').value,
                    b: row.querySelector('.b-input').value
                })).filter(c => c.f || c.b)
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = `cards_${setName.replace(/\s+/g, '_').toLowerCase()}.json`;
            link.click();
        }
    </script>
</body>
</html>